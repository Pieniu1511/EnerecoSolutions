"use strict";!function(e){"function"==typeof define&&define.amd?define(["module","exports"],e):"undefined"!=typeof exports?e(module,exports):(e(e={exports:{}},e.exports),(void 0).WOW=e.exports)}(function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e};function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t){return 0<=t.indexOf(e)}function a(e,t,n){null!=e.addEventListener?e.addEventListener(t,n,!1):null!=e.attachEvent?e.attachEvent("on"+t,n):e[t]=n}function l(e,t,n){null!=e.removeEventListener?e.removeEventListener(t,n,!1):null!=e.detachEvent?e.detachEvent("on"+t,n):delete e[t]}var r=window.WeakMap||window.MozWeakMap||(i(c,[{key:"get",value:function(e){for(var t=0;t<this.keys.length;t++)if(this.keys[t]===e)return this.values[t]}},{key:"set",value:function(e,t){for(var n=0;n<this.keys.length;n++)if(this.keys[n]===e)return this.values[n]=t,this;return this.keys.push(e),this.values.push(t),this}}]),c);function c(){n(this,c),this.keys=[],this.values=[]}var u=window.MutationObserver||window.WebkitMutationObserver||window.MozMutationObserver||(i(h,[{key:"observe",value:function(){}}]),h.notSupported=!0,h);function h(){n(this,h),"undefined"!=typeof console&&null!==console&&(console.warn("MutationObserver is not supported by your browser."),console.warn("WOW.js cannot detect dom mutations, please call .sync() after loading new content."))}var d=window.getComputedStyle||function(n){var i=/(\-([a-z]){1})/g;return{getPropertyValue:function(e){i.test(e="float"===e?"styleFloat":e)&&e.replace(i,function(e,t){return t.toUpperCase()});var t=n.currentStyle;return(null!=t?t[e]:void 0)||null}}},i=(i(f,[{key:"init",value:function(){this.element=window.document.documentElement,s(document.readyState,["interactive","complete"])?this.start():a(document,"DOMContentLoaded",this.start),this.finished=[]}},{key:"start",value:function(){var s=this;if(this.stopped=!1,this.boxes=[].slice.call(this.element.querySelectorAll("."+this.config.boxClass)),this.all=this.boxes.slice(0),this.boxes.length)if(this.disabled())this.resetStyle();else for(var e=0;e<this.boxes.length;e++){var t=this.boxes[e];this.applyStyle(t,!0)}this.disabled()||(a(this.config.scrollContainer||window,"scroll",this.scrollHandler),a(window,"resize",this.scrollHandler),this.interval=setInterval(this.scrollCallback,50)),this.config.live&&new u(function(e){for(var t=0;t<e.length;t++)for(var n=e[t],i=0;i<n.addedNodes.length;i++){var o=n.addedNodes[i];s.doSync(o)}}).observe(document.body,{childList:!0,subtree:!0})}},{key:"stop",value:function(){this.stopped=!0,l(this.config.scrollContainer||window,"scroll",this.scrollHandler),l(window,"resize",this.scrollHandler),null!=this.interval&&clearInterval(this.interval)}},{key:"sync",value:function(){u.notSupported&&this.doSync(this.element)}},{key:"doSync",value:function(e){if(1===(e=null==e?this.element:e).nodeType)for(var t=(e=e.parentNode||e).querySelectorAll("."+this.config.boxClass),n=0;n<t.length;n++){var i=t[n];s(i,this.all)||(this.boxes.push(i),this.all.push(i),this.stopped||this.disabled()?this.resetStyle():this.applyStyle(i,!0),this.scrolled=!0)}}},{key:"show",value:function(e){var t,n;return this.applyStyle(e),e.className=e.className+" "+this.config.animateClass,null!=this.config.callback&&this.config.callback(e),t=e,n=this.wowEvent,null!=t.dispatchEvent?t.dispatchEvent(n):n in(null!=t)?t[n]():"on"+n in(null!=t)&&t["on"+n](),this.config.resetAnimation&&(a(e,"animationend",this.resetAnimation),a(e,"oanimationend",this.resetAnimation),a(e,"webkitAnimationEnd",this.resetAnimation),a(e,"MSAnimationEnd",this.resetAnimation)),e}},{key:"applyStyle",value:function(e,t){var n=this,i=e.getAttribute("data-wow-duration"),o=e.getAttribute("data-wow-delay"),s=e.getAttribute("data-wow-iteration");return this.animate(function(){return n.customStyle(e,t,i,o,s)})}},{key:"resetStyle",value:function(){for(var e=0;e<this.boxes.length;e++)this.boxes[e].style.visibility="visible"}},{key:"resetAnimation",value:function(e){0<=e.type.toLowerCase().indexOf("animationend")&&((e=e.target||e.srcElement).className=e.className.replace(this.config.animateClass,"").trim())}},{key:"customStyle",value:function(e,t,n,i,o){return t&&this.cacheAnimationName(e),e.style.visibility=t?"hidden":"visible",n&&this.vendorSet(e.style,{animationDuration:n}),i&&this.vendorSet(e.style,{animationDelay:i}),o&&this.vendorSet(e.style,{animationIterationCount:o}),this.vendorSet(e.style,{animationName:t?"none":this.cachedAnimationName(e)}),e}},{key:"vendorSet",value:function(e,t){for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];e[""+n]=i;for(var o=0;o<this.vendors.length;o++)e[""+this.vendors[o]+n.charAt(0).toUpperCase()+n.substr(1)]=i}}},{key:"vendorCSS",value:function(e,t){for(var n=d(e),i=n.getPropertyCSSValue(t),o=0;o<this.vendors.length;o++)var s=this.vendors[o],i=i||n.getPropertyCSSValue("-"+s+"-"+t);return i}},{key:"animationName",value:function(t){var n=void 0;try{n=this.vendorCSS(t,"animation-name").cssText}catch(e){n=d(t).getPropertyValue("animation-name")}return"none"===n?"":n}},{key:"cacheAnimationName",value:function(e){return this.animationNameCache.set(e,this.animationName(e))}},{key:"cachedAnimationName",value:function(e){return this.animationNameCache.get(e)}},{key:"scrollHandler",value:function(){this.scrolled=!0}},{key:"scrollCallback",value:function(){if(this.scrolled){this.scrolled=!1;for(var e=[],t=0;t<this.boxes.length;t++){var n=this.boxes[t];n&&(this.isVisible(n)?this.show(n):e.push(n))}this.boxes=e,this.boxes.length||this.config.live||this.stop()}}},{key:"offsetTop",value:function(e){for(;void 0===e.offsetTop;)e=e.parentNode;for(var t=e.offsetTop;e.offsetParent;)t+=(e=e.offsetParent).offsetTop;return t}},{key:"isVisible",value:function(e){var t=e.getAttribute("data-wow-offset")||this.config.offset,n=this.config.scrollContainer&&this.config.scrollContainer.scrollTop||window.pageYOffset,t=n+Math.min(this.element.clientHeight,"innerHeight"in window?window.innerHeight:document.documentElement.clientHeight)-t,i=this.offsetTop(e),e=i+e.clientHeight;return i<=t&&n<=e}},{key:"disabled",value:function(){return!this.config.mobile&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}}]),f);function f(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];n(this,f),this.defaults={boxClass:"wow",animateClass:"animated",offset:0,mobile:!0,live:!0,callback:null,scrollContainer:null,resetAnimation:!0},this.animate="requestAnimationFrame"in window?function(e){return window.requestAnimationFrame(e)}:function(e){return e()},this.vendors=["moz","webkit"],this.start=this.start.bind(this),this.resetAnimation=this.resetAnimation.bind(this),this.scrollHandler=this.scrollHandler.bind(this),this.scrollCallback=this.scrollCallback.bind(this),this.scrolled=!0,this.config=function(e,t){for(var n in t){var i;null==e[n]&&(i=t[n],e[n]=i)}return e}(e,this.defaults),null!=e.scrollContainer&&(this.config.scrollContainer=document.querySelector(e.scrollContainer)),this.animationNameCache=new r,this.wowEvent=function(e,t,n,i){var t=!(arguments.length<=1||void 0===t)&&t,n=!(arguments.length<=2||void 0===n)&&n,i=arguments.length<=3||void 0===i?null:i,o=void 0;return null!=document.createEvent?(o=document.createEvent("CustomEvent")).initCustomEvent(e,t,n,i):null!=document.createEventObject?(o=document.createEventObject()).eventType=e:o.eventName=e,o}(this.config.boxClass)}t.default=i,e.exports=t.default});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndvdy5qcyJdLCJuYW1lcyI6WyJmYWN0b3J5IiwiZGVmaW5lIiwiYW1kIiwiZXhwb3J0cyIsIm1vZHVsZSIsIm1vZCIsIldPVyIsImdsb2JhbCIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiX2NyZWF0ZUNsYXNzIiwic3RhdGljUHJvcHMiLCJkZWZpbmVQcm9wZXJ0aWVzIiwicHJvdG9Qcm9wcyIsInByb3RvdHlwZSIsInByb3BzIiwibGVuZ3RoIiwiZGVzY3JpcHRvciIsImkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwidGFyZ2V0Iiwia2V5IiwiaXNJbiIsImV4dGVuZCIsImN1c3RvbSIsImhheXN0YWNrIiwiaW5kZXhPZiIsImRlZmF1bHRzIiwiYWRkRXZlbnQiLCJlbGVtIiwiZXZlbnQiLCJmbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiYXR0YWNoRXZlbnQiLCJkZXRhY2hFdmVudCIsInJlbW92ZUV2ZW50IiwiZ2V0SW5uZXJIZWlnaHQiLCJpbm5lckhlaWdodCIsIldlYWtNYXAiLCJ3aW5kb3ciLCJNb3pXZWFrTWFwIiwidmFsdWVzIiwicHVzaCIsImtleXMiLCJ0aGlzIiwiY29uc29sZSIsIndhcm4iLCJNdXRhdGlvbk9ic2VydmVyIiwiV2Via2l0TXV0YXRpb25PYnNlcnZlciIsIk1vek11dGF0aW9uT2JzZXJ2ZXIiLCJhbmltYXRlQ2xhc3MiLCJvZmZzZXQiLCJzY3JvbGxDb250YWluZXIiLCJub3RTdXBwb3J0ZWQiLCJjdXJyZW50U3R5bGUiLCJnZXRDb21wdXRlZFN0eWxlIiwiZWwiLCJnZXRDb21wdXRlZFN0eWxlUlgiLCJjYWxsYmFjayIsImdldFByb3BlcnR5VmFsdWUiLCJwcm9wIiwidGVzdCIsInZlbmRvcnMiLCJyZXNldEFuaW1hdGlvbiIsInNjcm9sbEhhbmRsZXIiLCJiaW5kIiwiX2NoYXIiLCJzY3JvbGxDYWxsYmFjayIsIm9ic2VydmUiLCJlbGVtZW50IiwiZG9jdW1lbnQiLCJkb2N1bWVudEVsZW1lbnQiLCJyZWFkeVN0YXRlIiwic3RhcnQiLCJzdG9wIiwiX3RoaXMiLCJib3hlcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjb25maWciLCJib3hDbGFzcyIsImFsbCIsImRvU3luYyIsImRpc2FibGVkIiwicmVzZXRTdHlsZSIsImJveCIsInBhcmVudE5vZGUiLCJpdGVyYWJsZSIsImludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJyZWNvcmRzIiwiaiIsInJlY29yZCIsInN0b3BwZWQiLCJrIiwiYWRkZWROb2RlcyIsIm5vZGUiLCJhcHBseVN0eWxlIiwiYm9keSIsImNoaWxkTGlzdCIsImVtaXRFdmVudCIsImNsZWFySW50ZXJ2YWwiLCJkdXJhdGlvbiIsImdldEF0dHJpYnV0ZSIsInR5cGUiLCJ0b0xvd2VyQ2FzZSIsImNsYXNzTmFtZSIsInNjcm9sbGVkIiwiYW5pbWF0aW9uRHVyYXRpb24iLCJhbmltYXRpb25EZWxheSIsImRpc3BhdGNoRXZlbnQiLCJpdGVyYXRpb24iLCJ2ZW5kb3JTZXQiLCJhbmltYXRpb25JdGVyYXRpb25Db3VudCIsImFuaW1hdGlvbk5hbWUiLCJoaWRkZW4iLCJwcm9wZXJ0aWVzIiwiaGFzT3duUHJvcGVydHkiLCJkZWxheSIsIm5hbWUiLCJhbmltYXRlIiwiX3RoaXMyIiwiY3VzdG9tU3R5bGUiLCJ0b1VwcGVyQ2FzZSIsInN1YnN0ciIsInZlbmRvckNTUyIsInByb3BlcnR5Iiwic3R5bGUiLCJyZXN1bHQiLCJnZXRQcm9wZXJ0eUNTU1ZhbHVlIiwic3JjRWxlbWVudCIsImFOYW1lIiwicmVwbGFjZSIsInRyaW0iLCJjYWNoZUFuaW1hdGlvbk5hbWUiLCJ2aXNpYmlsaXR5IiwiY2FjaGVkQW5pbWF0aW9uTmFtZSIsImNoYXJBdCIsInJlc3VsdHMiLCJ2ZW5kb3IiLCJvZmZzZXRUb3AiLCJjc3NUZXh0IiwidG9wIiwiYm90dG9tIiwidmlld1RvcCIsImlzTW9iaWxlIiwiYW5pbWF0aW9uTmFtZUNhY2hlIiwiZ2V0IiwiaXNWaXNpYmxlIiwic2hvdyIsImxpdmUiLCJ1bmRlZmluZWQiLCJvZmZzZXRQYXJlbnQiLCJzY3JvbGxUb3AiLCJwYWdlWU9mZnNldCIsInZpZXdCb3R0b20iLCJNYXRoIiwibWluIiwiY2xpZW50SGVpZ2h0IiwibW9iaWxlIiwiZGV0YWlsIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiYXJndW1lbnRzIiwib3B0aW9ucyIsIndvd0V2ZW50IiwiY3VzdG9tRXZlbnQiLCJjcmVhdGVFdmVudCIsImluaXRDdXN0b21FdmVudCIsImNyZWF0ZUV2ZW50T2JqZWN0IiwiZXZlbnROYW1lIiwiYnViYmxlIiwiY2FuY2VsIl0sIm1hcHBpbmdzIjoiYUFBQSxDQUFBLFNBQW1CQSxHQUNJLFlBQWxCLE9BQU9DLFFBQXlCQSxPQUFPQyxJQUQzQ0QsT0FBQSxDQUFBLFNBQWtCRCxXQUFTQSxDQUFBLEVBQ0wsYUFBbEIsT0FBYUcsUUFHaEJILEVBRk1JLE9BQUVELE9BQVUsR0FPbEJILEVBTEFBLEVBQVFJLENBQ1JELFFBQU0sRUFHTixFQURVRSxFQUFDRixPQUFBLEdBS1osS0FBQSxHQUpFRyxJQUFBRCxFQUFBRixRQUlGLEVBRkNJLFNBQWFGLEVBQUlGLEdBV2xCLFNBQUFLLEVBQXdCQyxFQUFTQyxHQUNoQyxHQUFBLEVBQUlELGFBQVVDLEdBQ2IsTUFBQSxJQUFNQyxVQUFJQSxtQ0FBVSxDQUV0QixDQVZBQyxPQUZBQyxlQUFZVixFQUFBLGFBQUEsQ0FHWFcsTUFBTyxDQUFBLENBQ1IsQ0FGQUYsRUFZQSxJQUNDRyxFQVlDLFNBQUlDLEVBQWFDLEVBQWlCUCxHQUduQyxPQUZDUSxHQUFPUixFQUFXQSxFQUFBUyxVQUFBRCxDQUFBLEVBQ2xCRixHQUFBQyxFQUFBUCxFQUFBTSxDQUFBLEVBQ0VOLENBRUosRUFqQkMsU0FDTU8sRUFBZUcsRUFBTUMsR0FBMUIsSUFDQyxJQUFJQyxFQUFBQSxFQUFBQSxFQUFVRixFQUFHQSxPQUFRRyxDQUFB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QSxFQUFpQixPQUNuQyxDQUFDIiwiZmlsZSI6Indvdy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xyXG5cdGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcclxuXHRcdGRlZmluZShbJ21vZHVsZScsICdleHBvcnRzJ10sIGZhY3RvcnkpO1xyXG5cdH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgIT09ICd1bmRlZmluZWQnKSB7XHJcblx0XHRmYWN0b3J5KG1vZHVsZSwgZXhwb3J0cyk7XHJcblx0fSBlbHNlIHtcclxuXHRcdHZhciBtb2QgPSB7XHJcblx0XHRcdGV4cG9ydHM6IHt9LFxyXG5cdFx0fTtcclxuXHRcdGZhY3RvcnkobW9kLCBtb2QuZXhwb3J0cyk7XHJcblx0XHRnbG9iYWwuV09XID0gbW9kLmV4cG9ydHM7XHJcblx0fVxyXG59KSh0aGlzLCBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7XHJcblx0XHR2YWx1ZTogdHJ1ZSxcclxuXHR9KTtcclxuXHJcblx0dmFyIF9jbGFzcywgX3RlbXA7XHJcblxyXG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcclxuXHRcdGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XHJcblx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbicpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0dmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7XHJcblx0XHRmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcclxuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07XHJcblx0XHRcdFx0ZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO1xyXG5cdFx0XHRcdGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcclxuXHRcdFx0XHRpZiAoJ3ZhbHVlJyBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtcclxuXHRcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xyXG5cdFx0XHRpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xyXG5cdFx0XHRpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtcclxuXHRcdFx0cmV0dXJuIENvbnN0cnVjdG9yO1xyXG5cdFx0fTtcclxuXHR9KSgpO1xyXG5cclxuXHRmdW5jdGlvbiBpc0luKG5lZWRsZSwgaGF5c3RhY2spIHtcclxuXHRcdHJldHVybiBoYXlzdGFjay5pbmRleE9mKG5lZWRsZSkgPj0gMDtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIGV4dGVuZChjdXN0b20sIGRlZmF1bHRzKSB7XHJcblx0XHRmb3IgKHZhciBrZXkgaW4gZGVmYXVsdHMpIHtcclxuXHRcdFx0aWYgKGN1c3RvbVtrZXldID09IG51bGwpIHtcclxuXHRcdFx0XHR2YXIgdmFsdWUgPSBkZWZhdWx0c1trZXldO1xyXG5cdFx0XHRcdGN1c3RvbVtrZXldID0gdmFsdWU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHJldHVybiBjdXN0b207XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBpc01vYmlsZShhZ2VudCkge1xyXG5cdFx0cmV0dXJuIC9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdChhZ2VudCk7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBjcmVhdGVFdmVudChldmVudCkge1xyXG5cdFx0dmFyIGJ1YmJsZSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogYXJndW1lbnRzWzFdO1xyXG5cdFx0dmFyIGNhbmNlbCA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogYXJndW1lbnRzWzJdO1xyXG5cdFx0dmFyIGRldGFpbCA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMyB8fCBhcmd1bWVudHNbM10gPT09IHVuZGVmaW5lZCA/IG51bGwgOiBhcmd1bWVudHNbM107XHJcblxyXG5cdFx0dmFyIGN1c3RvbUV2ZW50ID0gdm9pZCAwO1xyXG5cdFx0aWYgKGRvY3VtZW50LmNyZWF0ZUV2ZW50ICE9IG51bGwpIHtcclxuXHRcdFx0Ly8gVzNDIERPTVxyXG5cdFx0XHRjdXN0b21FdmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdDdXN0b21FdmVudCcpO1xyXG5cdFx0XHRjdXN0b21FdmVudC5pbml0Q3VzdG9tRXZlbnQoZXZlbnQsIGJ1YmJsZSwgY2FuY2VsLCBkZXRhaWwpO1xyXG5cdFx0fSBlbHNlIGlmIChkb2N1bWVudC5jcmVhdGVFdmVudE9iamVjdCAhPSBudWxsKSB7XHJcblx0XHRcdC8vIElFIERPTSA8IDlcclxuXHRcdFx0Y3VzdG9tRXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudE9iamVjdCgpO1xyXG5cdFx0XHRjdXN0b21FdmVudC5ldmVudFR5cGUgPSBldmVudDtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGN1c3RvbUV2ZW50LmV2ZW50TmFtZSA9IGV2ZW50O1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBjdXN0b21FdmVudDtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIGVtaXRFdmVudChlbGVtLCBldmVudCkge1xyXG5cdFx0aWYgKGVsZW0uZGlzcGF0Y2hFdmVudCAhPSBudWxsKSB7XHJcblx0XHRcdC8vIFczQyBET01cclxuXHRcdFx0ZWxlbS5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxuXHRcdH0gZWxzZSBpZiAoZXZlbnQgaW4gKGVsZW0gIT0gbnVsbCkpIHtcclxuXHRcdFx0ZWxlbVtldmVudF0oKTtcclxuXHRcdH0gZWxzZSBpZiAoJ29uJyArIGV2ZW50IGluIChlbGVtICE9IG51bGwpKSB7XHJcblx0XHRcdGVsZW1bJ29uJyArIGV2ZW50XSgpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gYWRkRXZlbnQoZWxlbSwgZXZlbnQsIGZuKSB7XHJcblx0XHRpZiAoZWxlbS5hZGRFdmVudExpc3RlbmVyICE9IG51bGwpIHtcclxuXHRcdFx0Ly8gVzNDIERPTVxyXG5cdFx0XHRlbGVtLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGZuLCBmYWxzZSk7XHJcblx0XHR9IGVsc2UgaWYgKGVsZW0uYXR0YWNoRXZlbnQgIT0gbnVsbCkge1xyXG5cdFx0XHQvLyBJRSBET01cclxuXHRcdFx0ZWxlbS5hdHRhY2hFdmVudCgnb24nICsgZXZlbnQsIGZuKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIGZhbGxiYWNrXHJcblx0XHRcdGVsZW1bZXZlbnRdID0gZm47XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiByZW1vdmVFdmVudChlbGVtLCBldmVudCwgZm4pIHtcclxuXHRcdGlmIChlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIgIT0gbnVsbCkge1xyXG5cdFx0XHQvLyBXM0MgRE9NXHJcblx0XHRcdGVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgZm4sIGZhbHNlKTtcclxuXHRcdH0gZWxzZSBpZiAoZWxlbS5kZXRhY2hFdmVudCAhPSBudWxsKSB7XHJcblx0XHRcdC8vIElFIERPTVxyXG5cdFx0XHRlbGVtLmRldGFjaEV2ZW50KCdvbicgKyBldmVudCwgZm4pO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gZmFsbGJhY2tcclxuXHRcdFx0ZGVsZXRlIGVsZW1bZXZlbnRdO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gZ2V0SW5uZXJIZWlnaHQoKSB7XHJcblx0XHRpZiAoJ2lubmVySGVpZ2h0JyBpbiB3aW5kb3cpIHtcclxuXHRcdFx0cmV0dXJuIHdpbmRvdy5pbm5lckhlaWdodDtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDtcclxuXHR9XHJcblxyXG5cdC8vIE1pbmltYWxpc3RpYyBXZWFrTWFwIHNoaW0sIGp1c3QgaW4gY2FzZS5cclxuXHR2YXIgV2Vha01hcCA9XHJcblx0XHR3aW5kb3cuV2Vha01hcCB8fFxyXG5cdFx0d2luZG93Lk1veldlYWtNYXAgfHxcclxuXHRcdChmdW5jdGlvbiAoKSB7XHJcblx0XHRcdGZ1bmN0aW9uIFdlYWtNYXAoKSB7XHJcblx0XHRcdFx0X2NsYXNzQ2FsbENoZWNrKHRoaXMsIFdlYWtNYXApO1xyXG5cclxuXHRcdFx0XHR0aGlzLmtleXMgPSBbXTtcclxuXHRcdFx0XHR0aGlzLnZhbHVlcyA9IFtdO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRfY3JlYXRlQ2xhc3MoV2Vha01hcCwgW1xyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGtleTogJ2dldCcsXHJcblx0XHRcdFx0XHR2YWx1ZTogZnVuY3Rpb24gZ2V0KGtleSkge1xyXG5cdFx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMua2V5cy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdFx0XHRcdHZhciBpdGVtID0gdGhpcy5rZXlzW2ldO1xyXG5cdFx0XHRcdFx0XHRcdGlmIChpdGVtID09PSBrZXkpIHtcclxuXHRcdFx0XHRcdFx0XHRcdHJldHVybiB0aGlzLnZhbHVlc1tpXTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0cmV0dXJuIHVuZGVmaW5lZDtcclxuXHRcdFx0XHRcdH0sXHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRrZXk6ICdzZXQnLFxyXG5cdFx0XHRcdFx0dmFsdWU6IGZ1bmN0aW9uIHNldChrZXksIHZhbHVlKSB7XHJcblx0XHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5rZXlzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0XHRcdFx0dmFyIGl0ZW0gPSB0aGlzLmtleXNbaV07XHJcblx0XHRcdFx0XHRcdFx0aWYgKGl0ZW0gPT09IGtleSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy52YWx1ZXNbaV0gPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRcdHJldHVybiB0aGlzO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR0aGlzLmtleXMucHVzaChrZXkpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnZhbHVlcy5wdXNoKHZhbHVlKTtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIHRoaXM7XHJcblx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdF0pO1xyXG5cclxuXHRcdFx0cmV0dXJuIFdlYWtNYXA7XHJcblx0XHR9KSgpO1xyXG5cclxuXHQvLyBEdW1teSBNdXRhdGlvbk9ic2VydmVyLCB0byBhdm9pZCByYWlzaW5nIGV4Y2VwdGlvbnMuXHJcblx0dmFyIE11dGF0aW9uT2JzZXJ2ZXIgPVxyXG5cdFx0d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXIgfHxcclxuXHRcdHdpbmRvdy5XZWJraXRNdXRhdGlvbk9ic2VydmVyIHx8XHJcblx0XHR3aW5kb3cuTW96TXV0YXRpb25PYnNlcnZlciB8fFxyXG5cdFx0KChfdGVtcCA9IF9jbGFzcyA9XHJcblx0XHRcdChmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0ZnVuY3Rpb24gTXV0YXRpb25PYnNlcnZlcigpIHtcclxuXHRcdFx0XHRcdF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNdXRhdGlvbk9ic2VydmVyKTtcclxuXHJcblx0XHRcdFx0XHRpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIGNvbnNvbGUgIT09IG51bGwpIHtcclxuXHRcdFx0XHRcdFx0Y29uc29sZS53YXJuKCdNdXRhdGlvbk9ic2VydmVyIGlzIG5vdCBzdXBwb3J0ZWQgYnkgeW91ciBicm93c2VyLicpO1xyXG5cdFx0XHRcdFx0XHRjb25zb2xlLndhcm4oJ1dPVy5qcyBjYW5ub3QgZGV0ZWN0IGRvbSBtdXRhdGlvbnMsIHBsZWFzZSBjYWxsIC5zeW5jKCkgYWZ0ZXIgbG9hZGluZyBuZXcgY29udGVudC4nKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdF9jcmVhdGVDbGFzcyhNdXRhdGlvbk9ic2VydmVyLCBbXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdGtleTogJ29ic2VydmUnLFxyXG5cdFx0XHRcdFx0XHR2YWx1ZTogZnVuY3Rpb24gb2JzZXJ2ZSgpIHt9LFxyXG5cdFx0XHRcdFx0fSxcclxuXHRcdFx0XHRdKTtcclxuXHJcblx0XHRcdFx0cmV0dXJuIE11dGF0aW9uT2JzZXJ2ZXI7XHJcblx0XHRcdH0pKCkpLFxyXG5cdFx0KF9jbGFzcy5ub3RTdXBwb3J0ZWQgPSB0cnVlKSxcclxuXHRcdF90ZW1wKTtcclxuXHJcblx0Ly8gZ2V0Q29tcHV0ZWRTdHlsZSBzaGltLCBmcm9tIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzIxNzk3Mjk0XHJcblx0dmFyIGdldENvbXB1dGVkU3R5bGUgPVxyXG5cdFx0d2luZG93LmdldENvbXB1dGVkU3R5bGUgfHxcclxuXHRcdGZ1bmN0aW9uIGdldENvbXB1dGVkU3R5bGUoZWwpIHtcclxuXHRcdFx0dmFyIGdldENvbXB1dGVkU3R5bGVSWCA9IC8oXFwtKFthLXpdKXsxfSkvZztcclxuXHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRnZXRQcm9wZXJ0eVZhbHVlOiBmdW5jdGlvbiBnZXRQcm9wZXJ0eVZhbHVlKHByb3ApIHtcclxuXHRcdFx0XHRcdGlmIChwcm9wID09PSAnZmxvYXQnKSB7XHJcblx0XHRcdFx0XHRcdHByb3AgPSAnc3R5bGVGbG9hdCc7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpZiAoZ2V0Q29tcHV0ZWRTdHlsZVJYLnRlc3QocHJvcCkpIHtcclxuXHRcdFx0XHRcdFx0cHJvcC5yZXBsYWNlKGdldENvbXB1dGVkU3R5bGVSWCwgZnVuY3Rpb24gKF8sIF9jaGFyKSB7XHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuIF9jaGFyLnRvVXBwZXJDYXNlKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0dmFyIGN1cnJlbnRTdHlsZSA9IGVsLmN1cnJlbnRTdHlsZTtcclxuXHJcblx0XHRcdFx0XHRyZXR1cm4gKGN1cnJlbnRTdHlsZSAhPSBudWxsID8gY3VycmVudFN0eWxlW3Byb3BdIDogdm9pZCAwKSB8fCBudWxsO1xyXG5cdFx0XHRcdH0sXHJcblx0XHRcdH07XHJcblx0XHR9O1xyXG5cclxuXHR2YXIgV09XID0gKGZ1bmN0aW9uICgpIHtcclxuXHRcdGZ1bmN0aW9uIFdPVygpIHtcclxuXHRcdFx0dmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1swXTtcclxuXHJcblx0XHRcdF9jbGFzc0NhbGxDaGVjayh0aGlzLCBXT1cpO1xyXG5cclxuXHRcdFx0dGhpcy5kZWZhdWx0cyA9IHtcclxuXHRcdFx0XHRib3hDbGFzczogJ3dvdycsXHJcblx0XHRcdFx0YW5pbWF0ZUNsYXNzOiAnYW5pbWF0ZWQnLFxyXG5cdFx0XHRcdG9mZnNldDogMCxcclxuXHRcdFx0XHRtb2JpbGU6IHRydWUsXHJcblx0XHRcdFx0bGl2ZTogdHJ1ZSxcclxuXHRcdFx0XHRjYWxsYmFjazogbnVsbCxcclxuXHRcdFx0XHRzY3JvbGxDb250YWluZXI6IG51bGwsXHJcblx0XHRcdFx0cmVzZXRBbmltYXRpb246IHRydWUsXHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHR0aGlzLmFuaW1hdGUgPSAoZnVuY3Rpb24gYW5pbWF0ZUZhY3RvcnkoKSB7XHJcblx0XHRcdFx0aWYgKCdyZXF1ZXN0QW5pbWF0aW9uRnJhbWUnIGluIHdpbmRvdykge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShjYWxsYmFjayk7XHJcblx0XHRcdFx0XHR9O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gY2FsbGJhY2soKTtcclxuXHRcdFx0XHR9O1xyXG5cdFx0XHR9KSgpO1xyXG5cclxuXHRcdFx0dGhpcy52ZW5kb3JzID0gWydtb3onLCAnd2Via2l0J107XHJcblxyXG5cdFx0XHR0aGlzLnN0YXJ0ID0gdGhpcy5zdGFydC5iaW5kKHRoaXMpO1xyXG5cdFx0XHR0aGlzLnJlc2V0QW5pbWF0aW9uID0gdGhpcy5yZXNldEFuaW1hdGlvbi5iaW5kKHRoaXMpO1xyXG5cdFx0XHR0aGlzLnNjcm9sbEhhbmRsZXIgPSB0aGlzLnNjcm9sbEhhbmRsZXIuYmluZCh0aGlzKTtcclxuXHRcdFx0dGhpcy5zY3JvbGxDYWxsYmFjayA9IHRoaXMuc2Nyb2xsQ2FsbGJhY2suYmluZCh0aGlzKTtcclxuXHRcdFx0dGhpcy5zY3JvbGxlZCA9IHRydWU7XHJcblx0XHRcdHRoaXMuY29uZmlnID0gZXh0ZW5kKG9wdGlvbnMsIHRoaXMuZGVmYXVsdHMpO1xyXG5cdFx0XHRpZiAob3B0aW9ucy5zY3JvbGxDb250YWluZXIgIT0gbnVsbCkge1xyXG5cdFx0XHRcdHRoaXMuY29uZmlnLnNjcm9sbENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iob3B0aW9ucy5zY3JvbGxDb250YWluZXIpO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vIE1hcCBvZiBlbGVtZW50cyB0byBhbmltYXRpb24gbmFtZXM6XHJcblx0XHRcdHRoaXMuYW5pbWF0aW9uTmFtZUNhY2hlID0gbmV3IFdlYWtNYXAoKTtcclxuXHRcdFx0dGhpcy53b3dFdmVudCA9IGNyZWF0ZUV2ZW50KHRoaXMuY29uZmlnLmJveENsYXNzKTtcclxuXHRcdH1cclxuXHJcblx0XHRfY3JlYXRlQ2xhc3MoV09XLCBbXHJcblx0XHRcdHtcclxuXHRcdFx0XHRrZXk6ICdpbml0JyxcclxuXHRcdFx0XHR2YWx1ZTogZnVuY3Rpb24gaW5pdCgpIHtcclxuXHRcdFx0XHRcdHRoaXMuZWxlbWVudCA9IHdpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XHJcblx0XHRcdFx0XHRpZiAoaXNJbihkb2N1bWVudC5yZWFkeVN0YXRlLCBbJ2ludGVyYWN0aXZlJywgJ2NvbXBsZXRlJ10pKSB7XHJcblx0XHRcdFx0XHRcdHRoaXMuc3RhcnQoKTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdGFkZEV2ZW50KGRvY3VtZW50LCAnRE9NQ29udGVudExvYWRlZCcsIHRoaXMuc3RhcnQpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0dGhpcy5maW5pc2hlZCA9IFtdO1xyXG5cdFx0XHRcdH0sXHJcblx0XHRcdH0sXHJcblx0XHRcdHtcclxuXHRcdFx0XHRrZXk6ICdzdGFydCcsXHJcblx0XHRcdFx0dmFsdWU6IGZ1bmN0aW9uIHN0YXJ0KCkge1xyXG5cdFx0XHRcdFx0dmFyIF90aGlzID0gdGhpcztcclxuXHJcblx0XHRcdFx0XHR0aGlzLnN0b3BwZWQgPSBmYWxzZTtcclxuXHRcdFx0XHRcdHRoaXMuYm94ZXMgPSBbXS5zbGljZS5jYWxsKHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuJyArIHRoaXMuY29uZmlnLmJveENsYXNzKSk7XHJcblx0XHRcdFx0XHR0aGlzLmFsbCA9IHRoaXMuYm94ZXMuc2xpY2UoMCk7XHJcblx0XHRcdFx0XHRpZiAodGhpcy5ib3hlcy5sZW5ndGgpIHtcclxuXHRcdFx0XHRcdFx0aWYgKHRoaXMuZGlzYWJsZWQoKSkge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucmVzZXRTdHlsZSgpO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5ib3hlcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdFx0XHRcdFx0dmFyIGJveCA9IHRoaXMuYm94ZXNbaV07XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmFwcGx5U3R5bGUoYm94LCB0cnVlKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmICghdGhpcy5kaXNhYmxlZCgpKSB7XHJcblx0XHRcdFx0XHRcdGFkZEV2ZW50KHRoaXMuY29uZmlnLnNjcm9sbENvbnRhaW5lciB8fCB3aW5kb3csICdzY3JvbGwnLCB0aGlzLnNjcm9sbEhhbmRsZXIpO1xyXG5cdFx0XHRcdFx0XHRhZGRFdmVudCh3aW5kb3csICdyZXNpemUnLCB0aGlzLnNjcm9sbEhhbmRsZXIpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLmludGVydmFsID0gc2V0SW50ZXJ2YWwodGhpcy5zY3JvbGxDYWxsYmFjaywgNTApO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYgKHRoaXMuY29uZmlnLmxpdmUpIHtcclxuXHRcdFx0XHRcdFx0dmFyIG11dCA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uIChyZWNvcmRzKSB7XHJcblx0XHRcdFx0XHRcdFx0Zm9yICh2YXIgaiA9IDA7IGogPCByZWNvcmRzLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdFx0XHRcdFx0XHR2YXIgcmVjb3JkID0gcmVjb3Jkc1tqXTtcclxuXHRcdFx0XHRcdFx0XHRcdGZvciAodmFyIGsgPSAwOyBrIDwgcmVjb3JkLmFkZGVkTm9kZXMubGVuZ3RoOyBrKyspIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dmFyIG5vZGUgPSByZWNvcmQuYWRkZWROb2Rlc1trXTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0X3RoaXMuZG9TeW5jKG5vZGUpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdW5kZWZpbmVkO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0bXV0Lm9ic2VydmUoZG9jdW1lbnQuYm9keSwge1xyXG5cdFx0XHRcdFx0XHRcdGNoaWxkTGlzdDogdHJ1ZSxcclxuXHRcdFx0XHRcdFx0XHRzdWJ0cmVlOiB0cnVlLFxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9LFxyXG5cdFx0XHR9LFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0a2V5OiAnc3RvcCcsXHJcblx0XHRcdFx0dmFsdWU6IGZ1bmN0aW9uIHN0b3AoKSB7XHJcblx0XHRcdFx0XHR0aGlzLnN0b3BwZWQgPSB0cnVlO1xyXG5cdFx0XHRcdFx0cmVtb3ZlRXZlbnQodGhpcy5jb25maWcuc2Nyb2xsQ29udGFpbmVyIHx8IHdpbmRvdywgJ3Njcm9sbCcsIHRoaXMuc2Nyb2xsSGFuZGxlcik7XHJcblx0XHRcdFx0XHRyZW1vdmVFdmVudCh3aW5kb3csICdyZXNpemUnLCB0aGlzLnNjcm9sbEhhbmRsZXIpO1xyXG5cdFx0XHRcdFx0aWYgKHRoaXMuaW50ZXJ2YWwgIT0gbnVsbCkge1xyXG5cdFx0XHRcdFx0XHRjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdH0sXHJcblx0XHRcdHtcclxuXHRcdFx0XHRrZXk6ICdzeW5jJyxcclxuXHRcdFx0XHR2YWx1ZTogZnVuY3Rpb24gc3luYygpIHtcclxuXHRcdFx0XHRcdGlmIChNdXRhdGlvbk9ic2VydmVyLm5vdFN1cHBvcnRlZCkge1xyXG5cdFx0XHRcdFx0XHR0aGlzLmRvU3luYyh0aGlzLmVsZW1lbnQpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdH0sXHJcblx0XHRcdHtcclxuXHRcdFx0XHRrZXk6ICdkb1N5bmMnLFxyXG5cdFx0XHRcdHZhbHVlOiBmdW5jdGlvbiBkb1N5bmMoZWxlbWVudCkge1xyXG5cdFx0XHRcdFx0aWYgKHR5cGVvZiBlbGVtZW50ID09PSAndW5kZWZpbmVkJyB8fCBlbGVtZW50ID09PSBudWxsKSB7XHJcblx0XHRcdFx0XHRcdGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQ7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpZiAoZWxlbWVudC5ub2RlVHlwZSAhPT0gMSkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlIHx8IGVsZW1lbnQ7XHJcblx0XHRcdFx0XHR2YXIgaXRlcmFibGUgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy4nICsgdGhpcy5jb25maWcuYm94Q2xhc3MpO1xyXG5cdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBpdGVyYWJsZS5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdFx0XHR2YXIgYm94ID0gaXRlcmFibGVbaV07XHJcblx0XHRcdFx0XHRcdGlmICghaXNJbihib3gsIHRoaXMuYWxsKSkge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMuYm94ZXMucHVzaChib3gpO1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMuYWxsLnB1c2goYm94KTtcclxuXHRcdFx0XHRcdFx0XHRpZiAodGhpcy5zdG9wcGVkIHx8IHRoaXMuZGlzYWJsZWQoKSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5yZXNldFN0eWxlKCk7XHJcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMuYXBwbHlTdHlsZShib3gsIHRydWUpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR0aGlzLnNjcm9sbGVkID0gdHJ1ZTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdH0sXHJcblx0XHRcdHtcclxuXHRcdFx0XHRrZXk6ICdzaG93JyxcclxuXHRcdFx0XHR2YWx1ZTogZnVuY3Rpb24gc2hvdyhib3gpIHtcclxuXHRcdFx0XHRcdHRoaXMuYXBwbHlTdHlsZShib3gpO1xyXG5cdFx0XHRcdFx0Ym94LmNsYXNzTmFtZSA9IGJveC5jbGFzc05hbWUgKyAnICcgKyB0aGlzLmNvbmZpZy5hbmltYXRlQ2xhc3M7XHJcblx0XHRcdFx0XHRpZiAodGhpcy5jb25maWcuY2FsbGJhY2sgIT0gbnVsbCkge1xyXG5cdFx0XHRcdFx0XHR0aGlzLmNvbmZpZy5jYWxsYmFjayhib3gpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0ZW1pdEV2ZW50KGJveCwgdGhpcy53b3dFdmVudCk7XHJcblxyXG5cdFx0XHRcdFx0aWYgKHRoaXMuY29uZmlnLnJlc2V0QW5pbWF0aW9uKSB7XHJcblx0XHRcdFx0XHRcdGFkZEV2ZW50KGJveCwgJ2FuaW1hdGlvbmVuZCcsIHRoaXMucmVzZXRBbmltYXRpb24pO1xyXG5cdFx0XHRcdFx0XHRhZGRFdmVudChib3gsICdvYW5pbWF0aW9uZW5kJywgdGhpcy5yZXNldEFuaW1hdGlvbik7XHJcblx0XHRcdFx0XHRcdGFkZEV2ZW50KGJveCwgJ3dlYmtpdEFuaW1hdGlvbkVuZCcsIHRoaXMucmVzZXRBbmltYXRpb24pO1xyXG5cdFx0XHRcdFx0XHRhZGRFdmVudChib3gsICdNU0FuaW1hdGlvbkVuZCcsIHRoaXMucmVzZXRBbmltYXRpb24pO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdHJldHVybiBib3g7XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0fSxcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGtleTogJ2FwcGx5U3R5bGUnLFxyXG5cdFx0XHRcdHZhbHVlOiBmdW5jdGlvbiBhcHBseVN0eWxlKGJveCwgaGlkZGVuKSB7XHJcblx0XHRcdFx0XHR2YXIgX3RoaXMyID0gdGhpcztcclxuXHJcblx0XHRcdFx0XHR2YXIgZHVyYXRpb24gPSBib3guZ2V0QXR0cmlidXRlKCdkYXRhLXdvdy1kdXJhdGlvbicpO1xyXG5cdFx0XHRcdFx0dmFyIGRlbGF5ID0gYm94LmdldEF0dHJpYnV0ZSgnZGF0YS13b3ctZGVsYXknKTtcclxuXHRcdFx0XHRcdHZhciBpdGVyYXRpb24gPSBib3guZ2V0QXR0cmlidXRlKCdkYXRhLXdvdy1pdGVyYXRpb24nKTtcclxuXHJcblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5hbmltYXRlKGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIF90aGlzMi5jdXN0b21TdHlsZShib3gsIGhpZGRlbiwgZHVyYXRpb24sIGRlbGF5LCBpdGVyYXRpb24pO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0fSxcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGtleTogJ3Jlc2V0U3R5bGUnLFxyXG5cdFx0XHRcdHZhbHVlOiBmdW5jdGlvbiByZXNldFN0eWxlKCkge1xyXG5cdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmJveGVzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0XHRcdHZhciBib3ggPSB0aGlzLmJveGVzW2ldO1xyXG5cdFx0XHRcdFx0XHRib3guc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHJldHVybiB1bmRlZmluZWQ7XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0fSxcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGtleTogJ3Jlc2V0QW5pbWF0aW9uJyxcclxuXHRcdFx0XHR2YWx1ZTogZnVuY3Rpb24gcmVzZXRBbmltYXRpb24oZXZlbnQpIHtcclxuXHRcdFx0XHRcdGlmIChldmVudC50eXBlLnRvTG93ZXJDYXNlKCkuaW5kZXhPZignYW5pbWF0aW9uZW5kJykgPj0gMCkge1xyXG5cdFx0XHRcdFx0XHR2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IHx8IGV2ZW50LnNyY0VsZW1lbnQ7XHJcblx0XHRcdFx0XHRcdHRhcmdldC5jbGFzc05hbWUgPSB0YXJnZXQuY2xhc3NOYW1lLnJlcGxhY2UodGhpcy5jb25maWcuYW5pbWF0ZUNsYXNzLCAnJykudHJpbSgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdH0sXHJcblx0XHRcdHtcclxuXHRcdFx0XHRrZXk6ICdjdXN0b21TdHlsZScsXHJcblx0XHRcdFx0dmFsdWU6IGZ1bmN0aW9uIGN1c3RvbVN0eWxlKGJveCwgaGlkZGVuLCBkdXJhdGlvbiwgZGVsYXksIGl0ZXJhdGlvbikge1xyXG5cdFx0XHRcdFx0aWYgKGhpZGRlbikge1xyXG5cdFx0XHRcdFx0XHR0aGlzLmNhY2hlQW5pbWF0aW9uTmFtZShib3gpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Ym94LnN0eWxlLnZpc2liaWxpdHkgPSBoaWRkZW4gPyAnaGlkZGVuJyA6ICd2aXNpYmxlJztcclxuXHJcblx0XHRcdFx0XHRpZiAoZHVyYXRpb24pIHtcclxuXHRcdFx0XHRcdFx0dGhpcy52ZW5kb3JTZXQoYm94LnN0eWxlLCB7IGFuaW1hdGlvbkR1cmF0aW9uOiBkdXJhdGlvbiB9KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmIChkZWxheSkge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnZlbmRvclNldChib3guc3R5bGUsIHsgYW5pbWF0aW9uRGVsYXk6IGRlbGF5IH0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYgKGl0ZXJhdGlvbikge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnZlbmRvclNldChib3guc3R5bGUsIHsgYW5pbWF0aW9uSXRlcmF0aW9uQ291bnQ6IGl0ZXJhdGlvbiB9KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHRoaXMudmVuZG9yU2V0KGJveC5zdHlsZSwgeyBhbmltYXRpb25OYW1lOiBoaWRkZW4gPyAnbm9uZScgOiB0aGlzLmNhY2hlZEFuaW1hdGlvbk5hbWUoYm94KSB9KTtcclxuXHJcblx0XHRcdFx0XHRyZXR1cm4gYm94O1xyXG5cdFx0XHRcdH0sXHJcblx0XHRcdH0sXHJcblx0XHRcdHtcclxuXHRcdFx0XHRrZXk6ICd2ZW5kb3JTZXQnLFxyXG5cdFx0XHRcdHZhbHVlOiBmdW5jdGlvbiB2ZW5kb3JTZXQoZWxlbSwgcHJvcGVydGllcykge1xyXG5cdFx0XHRcdFx0Zm9yICh2YXIgbmFtZSBpbiBwcm9wZXJ0aWVzKSB7XHJcblx0XHRcdFx0XHRcdGlmIChwcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XHJcblx0XHRcdFx0XHRcdFx0dmFyIHZhbHVlID0gcHJvcGVydGllc1tuYW1lXTtcclxuXHRcdFx0XHRcdFx0XHRlbGVtWycnICsgbmFtZV0gPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudmVuZG9ycy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdFx0XHRcdFx0dmFyIHZlbmRvciA9IHRoaXMudmVuZG9yc1tpXTtcclxuXHRcdFx0XHRcdFx0XHRcdGVsZW1bJycgKyB2ZW5kb3IgKyBuYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbmFtZS5zdWJzdHIoMSldID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0fSxcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGtleTogJ3ZlbmRvckNTUycsXHJcblx0XHRcdFx0dmFsdWU6IGZ1bmN0aW9uIHZlbmRvckNTUyhlbGVtLCBwcm9wZXJ0eSkge1xyXG5cdFx0XHRcdFx0dmFyIHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtKTtcclxuXHRcdFx0XHRcdHZhciByZXN1bHQgPSBzdHlsZS5nZXRQcm9wZXJ0eUNTU1ZhbHVlKHByb3BlcnR5KTtcclxuXHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy52ZW5kb3JzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0XHRcdHZhciB2ZW5kb3IgPSB0aGlzLnZlbmRvcnNbaV07XHJcblx0XHRcdFx0XHRcdHJlc3VsdCA9IHJlc3VsdCB8fCBzdHlsZS5nZXRQcm9wZXJ0eUNTU1ZhbHVlKCctJyArIHZlbmRvciArICctJyArIHByb3BlcnR5KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHJldHVybiByZXN1bHQ7XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0fSxcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGtleTogJ2FuaW1hdGlvbk5hbWUnLFxyXG5cdFx0XHRcdHZhbHVlOiBmdW5jdGlvbiBhbmltYXRpb25OYW1lKGJveCkge1xyXG5cdFx0XHRcdFx0dmFyIGFOYW1lID0gdm9pZCAwO1xyXG5cdFx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdFx0YU5hbWUgPSB0aGlzLnZlbmRvckNTUyhib3gsICdhbmltYXRpb24tbmFtZScpLmNzc1RleHQ7XHJcblx0XHRcdFx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRcdFx0XHQvLyBPcGVyYSwgZmFsbCBiYWNrIHRvIHBsYWluIHByb3BlcnR5IHZhbHVlXHJcblx0XHRcdFx0XHRcdGFOYW1lID0gZ2V0Q29tcHV0ZWRTdHlsZShib3gpLmdldFByb3BlcnR5VmFsdWUoJ2FuaW1hdGlvbi1uYW1lJyk7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0aWYgKGFOYW1lID09PSAnbm9uZScpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuICcnOyAvLyBTVkcvRmlyZWZveCwgdW5hYmxlIHRvIGdldCBhbmltYXRpb24gbmFtZT9cclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRyZXR1cm4gYU5hbWU7XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0fSxcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGtleTogJ2NhY2hlQW5pbWF0aW9uTmFtZScsXHJcblx0XHRcdFx0dmFsdWU6IGZ1bmN0aW9uIGNhY2hlQW5pbWF0aW9uTmFtZShib3gpIHtcclxuXHRcdFx0XHRcdC8vIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTkyMTgzNFxyXG5cdFx0XHRcdFx0Ly8gYm94LmRhdGFzZXQgaXMgbm90IHN1cHBvcnRlZCBmb3IgU1ZHIGVsZW1lbnRzIGluIEZpcmVmb3hcclxuXHRcdFx0XHRcdHJldHVybiB0aGlzLmFuaW1hdGlvbk5hbWVDYWNoZS5zZXQoYm94LCB0aGlzLmFuaW1hdGlvbk5hbWUoYm94KSk7XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0fSxcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGtleTogJ2NhY2hlZEFuaW1hdGlvbk5hbWUnLFxyXG5cdFx0XHRcdHZhbHVlOiBmdW5jdGlvbiBjYWNoZWRBbmltYXRpb25OYW1lKGJveCkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIHRoaXMuYW5pbWF0aW9uTmFtZUNhY2hlLmdldChib3gpO1xyXG5cdFx0XHRcdH0sXHJcblx0XHRcdH0sXHJcblx0XHRcdHtcclxuXHRcdFx0XHRrZXk6ICdzY3JvbGxIYW5kbGVyJyxcclxuXHRcdFx0XHR2YWx1ZTogZnVuY3Rpb24gc2Nyb2xsSGFuZGxlcigpIHtcclxuXHRcdFx0XHRcdHRoaXMuc2Nyb2xsZWQgPSB0cnVlO1xyXG5cdFx0XHRcdH0sXHJcblx0XHRcdH0sXHJcblx0XHRcdHtcclxuXHRcdFx0XHRrZXk6ICdzY3JvbGxDYWxsYmFjaycsXHJcblx0XHRcdFx0dmFsdWU6IGZ1bmN0aW9uIHNjcm9sbENhbGxiYWNrKCkge1xyXG5cdFx0XHRcdFx0aWYgKHRoaXMuc2Nyb2xsZWQpIHtcclxuXHRcdFx0XHRcdFx0dGhpcy5zY3JvbGxlZCA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0XHR2YXIgcmVzdWx0cyA9IFtdO1xyXG5cdFx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuYm94ZXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRcdFx0XHR2YXIgYm94ID0gdGhpcy5ib3hlc1tpXTtcclxuXHRcdFx0XHRcdFx0XHRpZiAoYm94KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAodGhpcy5pc1Zpc2libGUoYm94KSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnNob3coYm94KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRyZXN1bHRzLnB1c2goYm94KTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0dGhpcy5ib3hlcyA9IHJlc3VsdHM7XHJcblx0XHRcdFx0XHRcdGlmICghdGhpcy5ib3hlcy5sZW5ndGggJiYgIXRoaXMuY29uZmlnLmxpdmUpIHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnN0b3AoKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdH0sXHJcblx0XHRcdHtcclxuXHRcdFx0XHRrZXk6ICdvZmZzZXRUb3AnLFxyXG5cdFx0XHRcdHZhbHVlOiBmdW5jdGlvbiBvZmZzZXRUb3AoZWxlbWVudCkge1xyXG5cdFx0XHRcdFx0Ly8gU1ZHIGVsZW1lbnRzIGRvbid0IGhhdmUgYW4gb2Zmc2V0VG9wIGluIEZpcmVmb3guXHJcblx0XHRcdFx0XHQvLyBUaGlzIHdpbGwgdXNlIHRoZWlyIG5lYXJlc3QgcGFyZW50IHRoYXQgaGFzIGFuIG9mZnNldFRvcC5cclxuXHRcdFx0XHRcdC8vIEFsc28sIHVzaW5nICgnb2Zmc2V0VG9wJyBvZiBlbGVtZW50KSBjYXVzZXMgYW4gZXhjZXB0aW9uIGluIEZpcmVmb3guXHJcblx0XHRcdFx0XHR3aGlsZSAoZWxlbWVudC5vZmZzZXRUb3AgPT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRcdFx0XHRlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0dmFyIHRvcCA9IGVsZW1lbnQub2Zmc2V0VG9wO1xyXG5cdFx0XHRcdFx0d2hpbGUgKGVsZW1lbnQub2Zmc2V0UGFyZW50KSB7XHJcblx0XHRcdFx0XHRcdGVsZW1lbnQgPSBlbGVtZW50Lm9mZnNldFBhcmVudDtcclxuXHRcdFx0XHRcdFx0dG9wICs9IGVsZW1lbnQub2Zmc2V0VG9wO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0cmV0dXJuIHRvcDtcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHR9LFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0a2V5OiAnaXNWaXNpYmxlJyxcclxuXHRcdFx0XHR2YWx1ZTogZnVuY3Rpb24gaXNWaXNpYmxlKGJveCkge1xyXG5cdFx0XHRcdFx0dmFyIG9mZnNldCA9IGJveC5nZXRBdHRyaWJ1dGUoJ2RhdGEtd293LW9mZnNldCcpIHx8IHRoaXMuY29uZmlnLm9mZnNldDtcclxuXHRcdFx0XHRcdHZhciB2aWV3VG9wID0gKHRoaXMuY29uZmlnLnNjcm9sbENvbnRhaW5lciAmJiB0aGlzLmNvbmZpZy5zY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wKSB8fCB3aW5kb3cucGFnZVlPZmZzZXQ7XHJcblx0XHRcdFx0XHR2YXIgdmlld0JvdHRvbSA9IHZpZXdUb3AgKyBNYXRoLm1pbih0aGlzLmVsZW1lbnQuY2xpZW50SGVpZ2h0LCBnZXRJbm5lckhlaWdodCgpKSAtIG9mZnNldDtcclxuXHRcdFx0XHRcdHZhciB0b3AgPSB0aGlzLm9mZnNldFRvcChib3gpO1xyXG5cdFx0XHRcdFx0dmFyIGJvdHRvbSA9IHRvcCArIGJveC5jbGllbnRIZWlnaHQ7XHJcblxyXG5cdFx0XHRcdFx0cmV0dXJuIHRvcCA8PSB2aWV3Qm90dG9tICYmIGJvdHRvbSA+PSB2aWV3VG9wO1xyXG5cdFx0XHRcdH0sXHJcblx0XHRcdH0sXHJcblx0XHRcdHtcclxuXHRcdFx0XHRrZXk6ICdkaXNhYmxlZCcsXHJcblx0XHRcdFx0dmFsdWU6IGZ1bmN0aW9uIGRpc2FibGVkKCkge1xyXG5cdFx0XHRcdFx0cmV0dXJuICF0aGlzLmNvbmZpZy5tb2JpbGUgJiYgaXNNb2JpbGUobmF2aWdhdG9yLnVzZXJBZ2VudCk7XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0fSxcclxuXHRcdF0pO1xyXG5cclxuXHRcdHJldHVybiBXT1c7XHJcblx0fSkoKTtcclxuXHJcblx0ZXhwb3J0cy5kZWZhdWx0ID0gV09XO1xyXG5cdG1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xyXG59KTtcclxuIl19
